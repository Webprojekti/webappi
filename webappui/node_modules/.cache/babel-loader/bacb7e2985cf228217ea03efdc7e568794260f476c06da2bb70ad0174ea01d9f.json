{"ast":null,"code":"import Duration from \"../duration.js\";\nfunction dayDiff(earlier, later) {\n  const utcDayStart = dt => dt.toUTC(0, {\n      keepLocalTime: true\n    }).startOf(\"day\").valueOf(),\n    ms = utcDayStart(later) - utcDayStart(earlier);\n  return Math.floor(Duration.fromMillis(ms).as(\"days\"));\n}\nfunction highOrderDiffs(cursor, later, units) {\n  const differs = [[\"years\", (a, b) => b.year - a.year], [\"quarters\", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4], [\"months\", (a, b) => b.month - a.month + (b.year - a.year) * 12], [\"weeks\", (a, b) => {\n    const days = dayDiff(a, b);\n    return (days - days % 7) / 7;\n  }], [\"days\", dayDiff]];\n  const results = {};\n  let lowestOrder, highWater;\n  for (const [unit, differ] of differs) {\n    if (units.indexOf(unit) >= 0) {\n      lowestOrder = unit;\n      let delta = differ(cursor, later);\n      highWater = cursor.plus({\n        [unit]: delta\n      });\n      if (highWater > later) {\n        cursor = cursor.plus({\n          [unit]: delta - 1\n        });\n        delta -= 1;\n      } else {\n        cursor = highWater;\n      }\n      results[unit] = delta;\n    }\n  }\n  return [cursor, results, highWater, lowestOrder];\n}\nexport default function (earlier, later, units, opts) {\n  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);\n  const remainingMillis = later - cursor;\n  const lowerOrderUnits = units.filter(u => [\"hours\", \"minutes\", \"seconds\", \"milliseconds\"].indexOf(u) >= 0);\n  if (lowerOrderUnits.length === 0) {\n    if (highWater < later) {\n      highWater = cursor.plus({\n        [lowestOrder]: 1\n      });\n    }\n    if (highWater !== cursor) {\n      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);\n    }\n  }\n  const duration = Duration.fromObject(results, opts);\n  if (lowerOrderUnits.length > 0) {\n    return Duration.fromMillis(remainingMillis, opts).shiftTo(...lowerOrderUnits).plus(duration);\n  } else {\n    return duration;\n  }\n}","map":{"version":3,"names":["Duration","dayDiff","earlier","later","utcDayStart","dt","toUTC","keepLocalTime","startOf","valueOf","ms","Math","floor","fromMillis","as","highOrderDiffs","cursor","units","differs","a","b","year","quarter","month","days","results","lowestOrder","highWater","unit","differ","indexOf","delta","plus","opts","remainingMillis","lowerOrderUnits","filter","u","length","duration","fromObject","shiftTo"],"sources":["C:/Users/tmkyl/Documents/OAMK/Syksy22projekti/NYKYNEN/webappi/webappi/webappui/node_modules/luxon/src/impl/diff.js"],"sourcesContent":["import Duration from \"../duration.js\";\r\n\r\nfunction dayDiff(earlier, later) {\r\n  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf(\"day\").valueOf(),\r\n    ms = utcDayStart(later) - utcDayStart(earlier);\r\n  return Math.floor(Duration.fromMillis(ms).as(\"days\"));\r\n}\r\n\r\nfunction highOrderDiffs(cursor, later, units) {\r\n  const differs = [\r\n    [\"years\", (a, b) => b.year - a.year],\r\n    [\"quarters\", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4],\r\n    [\"months\", (a, b) => b.month - a.month + (b.year - a.year) * 12],\r\n    [\r\n      \"weeks\",\r\n      (a, b) => {\r\n        const days = dayDiff(a, b);\r\n        return (days - (days % 7)) / 7;\r\n      },\r\n    ],\r\n    [\"days\", dayDiff],\r\n  ];\r\n\r\n  const results = {};\r\n  let lowestOrder, highWater;\r\n\r\n  for (const [unit, differ] of differs) {\r\n    if (units.indexOf(unit) >= 0) {\r\n      lowestOrder = unit;\r\n\r\n      let delta = differ(cursor, later);\r\n      highWater = cursor.plus({ [unit]: delta });\r\n\r\n      if (highWater > later) {\r\n        cursor = cursor.plus({ [unit]: delta - 1 });\r\n        delta -= 1;\r\n      } else {\r\n        cursor = highWater;\r\n      }\r\n\r\n      results[unit] = delta;\r\n    }\r\n  }\r\n\r\n  return [cursor, results, highWater, lowestOrder];\r\n}\r\n\r\nexport default function (earlier, later, units, opts) {\r\n  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);\r\n\r\n  const remainingMillis = later - cursor;\r\n\r\n  const lowerOrderUnits = units.filter(\r\n    (u) => [\"hours\", \"minutes\", \"seconds\", \"milliseconds\"].indexOf(u) >= 0\r\n  );\r\n\r\n  if (lowerOrderUnits.length === 0) {\r\n    if (highWater < later) {\r\n      highWater = cursor.plus({ [lowestOrder]: 1 });\r\n    }\r\n\r\n    if (highWater !== cursor) {\r\n      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);\r\n    }\r\n  }\r\n\r\n  const duration = Duration.fromObject(results, opts);\r\n\r\n  if (lowerOrderUnits.length > 0) {\r\n    return Duration.fromMillis(remainingMillis, opts)\r\n      .shiftTo(...lowerOrderUnits)\r\n      .plus(duration);\r\n  } else {\r\n    return duration;\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}